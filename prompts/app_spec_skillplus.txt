<project_specification>
  <project_name>Skill Plus - Creador Profesional de Claude Skills</project_name>

  <overview>
    Skill Plus es una aplicación web profesional que permite a los usuarios crear "skills" (paquetes de conocimiento)
    para Claude Code de forma automática. Los usuarios pueden proporcionar una URL de documentación, y el sistema
    extrae el contenido, lo procesa con IA, y genera un paquete ZIP listo para usar en Claude Code.

    La aplicación incluye sistema de autenticación completo con 2FA, sistema de créditos para monetización,
    panel de administración, cola de trabajos para procesamiento asíncrono, y soporte para múltiples idiomas.
  </overview>

  <technology_stack>
    <frontend>
      <framework>Next.js 16 con App Router</framework>
      <language>TypeScript</language>
      <styling>Tailwind CSS v4 con shadcn/ui components</styling>
      <state_management>React hooks, useSession (better-auth)</state_management>
      <animations>Framer Motion</animations>
      <notifications>Sonner (toast notifications)</notifications>
      <icons>Lucide React, Radix Icons</icons>
    </frontend>
    <backend>
      <runtime>Next.js API Routes (serverless)</runtime>
      <database>Supabase PostgreSQL</database>
      <authentication>better-auth con soporte OAuth (Google, GitHub)</authentication>
      <storage>Vercel Blob Storage para archivos ZIP</storage>
      <ai_integration>Anthropic Claude API (SDK @anthropic-ai/sdk)</ai_integration>
      <payments>Polar.sh para suscripciones</payments>
      <email>Resend para emails transaccionales</email>
      <analytics>OpenPanel para tracking</analytics>
    </backend>
    <scraping>
      <library>Cheerio para parsing HTML</library>
      <packaging>Archiver para crear ZIPs</packaging>
    </scraping>
    <job_queue>
      <provider>Inngest para background jobs</provider>
      <storage>Supabase PostgreSQL con tabla job_queue</storage>
      <realtime>Server-Sent Events (SSE) para progreso en tiempo real</realtime>
    </job_queue>
  </technology_stack>

  <core_features>
    <skill_creation>
      - Formulario para crear skill: URL, nombre, descripción, idioma
      - Validación de URLs (seguridad SSRF)
      - Auto-extracción de nombre desde URL
      - Análisis de URL con IA para generar descripción
      - Detección de skills duplicados
      - Progreso en tiempo real vía SSE
      - Descarga de ZIP con skill generado
      - Soporte para español e inglés
    </skill_creation>

    <authentication>
      - Registro con email/password
      - Login con email/password
      - OAuth con Google y GitHub
      - Autenticación de dos factores (2FA/TOTP)
      - Recuperación de contraseña
      - Gestión de sesiones
      - Perfil de usuario con avatar
    </authentication>

    <credits_system>
      - Sistema de créditos para crear skills
      - Balance de créditos por usuario
      - Transacciones de créditos
      - Auto-recarga de créditos
      - Precios: crear skill = 1 crédito
      - Integración con Polar para comprar créditos
    </credits_system>

    <admin_panel>
      - Dashboard con estadísticas
      - Gestión de usuarios (lista, detalles)
      - Gestión de skills (ver, eliminar, transferir)
      - Gestión de jobs (cola de trabajos, retry, estado)
      - Gestión de créditos (recargar, ver transacciones)
      - Envío de emails a usuarios
    </admin_panel>

    <user_library>
      - Lista de skills creados por el usuario
      - Descargar skills existentes
      - Eliminar skills
      - Historial de creaciones
    </user_library>

    <super_skills>
      - Biblioteca de skills pre-creados por la plataforma
      - Categorización de super skills
      - Descarga individual o en bulk
    </super_skills>
  </core_features>

  <database_schema>
    <tables>
      <users>
        - id (uuid, PK)
        - email (unique)
        - name
        - image (avatar URL)
        - emailVerified (boolean)
        - twoFactorEnabled (boolean)
        - twoFactorSecret
        - role (user/admin)
        - createdAt, updatedAt
      </users>

      <sessions>
        - id, userId, token
        - expiresAt
        - ipAddress, userAgent
      </sessions>

      <accounts>
        - id, userId
        - provider (google, github, credential)
        - providerAccountId
        - accessToken, refreshToken
      </accounts>

      <skills>
        - id (uuid, PK)
        - user_id (FK to users)
        - name (unique per user)
        - url (source documentation URL)
        - blob_url (Vercel Blob URL for ZIP)
        - enhanced (boolean)
        - language (es/en)
        - created_at
        - pages_count, size_bytes
      </skills>

      <job_queue>
        - id (uuid, PK)
        - user_id (FK)
        - job_id (unique identifier)
        - status (pending/processing/completed/failed)
        - progress (0-100)
        - message
        - error
        - request_params (JSON)
        - result (JSON with download_url, skill_id)
        - created_at, updated_at
      </job_queue>

      <credit_balances>
        - user_id (PK, FK to users)
        - balance (integer)
        - updated_at
      </credit_balances>

      <credit_transactions>
        - id (uuid, PK)
        - user_id (FK)
        - amount (positive/negative)
        - type (purchase/usage/admin_grant/etc)
        - description
        - skill_name
        - created_at
      </credit_transactions>

      <super_skills>
        - id (uuid, PK)
        - name (unique)
        - description
        - category
        - source_url
        - blob_url
        - pages_count
        - language
        - is_active
        - created_at
      </super_skills>
    </tables>
  </database_schema>

  <api_endpoints>
    <auth>
      - POST/GET /api/auth/[...all] (better-auth handler)
      - GET /api/auth/providers
      - PUT /api/auth/update-profile
      - PUT /api/auth/update-profile-image
      - DELETE /api/auth/delete-profile-image
      - PUT /api/auth/change-password
      - POST /api/auth/2fa/setup
      - POST /api/auth/2fa/verify
      - POST /api/auth/2fa/disable
      - GET /api/auth/2fa/status
      - GET /api/auth/check-2fa
    </auth>

    <skills>
      - POST /api/create-skill (create new skill job)
      - GET /api/skills (list user's skills)
      - DELETE /api/delete-skill
      - GET /api/download/[name] (download skill ZIP)
      - POST /api/check-duplicate
      - POST /api/analyze-url (AI description generation)
    </skills>

    <jobs>
      - GET /api/jobs/[jobId] (get job status)
      - GET /api/jobs/[jobId]/stream (SSE progress stream)
    </jobs>

    <credits>
      - GET /api/credits/balance
      - POST /api/credits/transaction
      - POST /api/credits/auto-recharge
    </credits>

    <admin>
      - GET /api/admin/stats
      - GET /api/admin/users
      - GET /api/admin/skills
      - GET/DELETE /api/admin/jobs
      - POST /api/admin/jobs/[jobId]/retry
      - POST /api/admin/credits (add credits to user)
      - GET /api/admin/credits/[userId]/transactions
      - POST /api/admin/send-skill-email
      - POST /api/admin/transfer-skill
    </admin>

    <super_skills>
      - GET /api/super-skills
      - GET /api/super-skills/download/[name]
      - GET /api/super-skills/download/all
    </super_skills>

    <payments>
      - POST /api/polar/checkout
      - POST /api/polar/webhook
      - GET /api/polar/config
      - POST /api/checkout (Stripe legacy)
    </payments>

    <system>
      - GET /api/health
      - GET /api/test-supabase
      - GET /api/check-schema
    </system>
  </api_endpoints>

  <ui_components>
    <pages>
      - / (Home - skill creator form + library preview)
      - /sign-in (login page)
      - /sign-up (registration page)
      - /forgot-password
      - /reset-password
      - /setup-2fa
      - /profile (user profile settings)
      - /profile/security (2FA and password)
      - /pricing (subscription plans)
      - /pricing/success (payment success)
      - /super-skills (browse pre-made skills)
      - /admin (admin dashboard)
      - /admin/credits (credit management)
      - /admin/jobs (job queue management)
    </pages>

    <shared_components>
      - SkillCreatorForm (main form for creating skills)
      - SkillGenerationProgressSSE (real-time progress display)
      - RecentSkillsList (user's recent skills)
      - HistoryLibrary (full skills library view)
      - DuplicateSkillModal (duplicate detection modal)
      - SuccessModal (skill creation success)
      - NoCreditsModal (insufficient credits)
      - BackendStatusBanner (health check banner)
      - InstallButton (PWA install prompt)
    </shared_components>
  </ui_components>

  <improvement_areas>
    <high_priority>
      - Add comprehensive test coverage (vitest + playwright)
      - Implement better error handling and logging
      - Add retry logic for failed jobs
      - Improve scraping performance and reliability
      - Add rate limiting for API endpoints
    </high_priority>

    <medium_priority>
      - Add skill versioning
      - Implement skill sharing between users
      - Add skill templates
      - Improve AI enhancement quality
      - Add webhook notifications for job completion
    </medium_priority>

    <low_priority>
      - Dark mode improvements
      - Mobile app (PWA enhancement)
      - Bulk skill operations
      - Advanced analytics dashboard
      - API documentation (OpenAPI/Swagger)
    </low_priority>
  </improvement_areas>

  <success_criteria>
    - All existing functionality works correctly
    - New features integrate seamlessly with existing architecture
    - Code follows existing patterns and conventions
    - Tests pass and coverage improves
    - No regression in performance
    - Security best practices maintained
  </success_criteria>
</project_specification>
